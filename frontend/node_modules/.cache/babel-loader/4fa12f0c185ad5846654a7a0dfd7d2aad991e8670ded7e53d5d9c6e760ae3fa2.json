{"ast":null,"code":"var _jsxFileName = \"C:\\\\MNNIT\\\\SEM2\\\\programmingLab2\\\\Project\\\\smartcity\\\\smartCity\\\\frontend\\\\src\\\\components\\\\Auth\\\\GoogleLogin.js\",\n  _s = $RefreshSig$();\nimport { GoogleOAuthProvider, GoogleLogin } from '@react-oauth/google';\nimport axios from 'axios';\nimport { useAuth } from '../../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GoogleAuth = ({\n  isAdminLogin = false\n}) => {\n  _s();\n  const {\n    login\n  } = useAuth();\n  const handleSuccess = async credentialResponse => {\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_API_BASE_URL}/api/auth/google/`, {\n        id_token: credentialResponse.credential,\n        provider: \"google\",\n        is_admin_login: isAdminLogin\n      }, {\n        withCredentials: true\n      });\n      localStorage.setItem('token', response.data.token);\n      login(response.data.token, isAdminLogin);\n    } catch (error) {\n      console.error('Login failed:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(GoogleOAuthProvider, {\n    clientId: process.env.REACT_APP_GOOGLE_CLIENT_ID,\n    redirectUri: window.location.origin,\n    children: /*#__PURE__*/_jsxDEV(GoogleLogin, {\n      onSuccess: handleSuccess,\n      onError: () => console.log('Login Failed'),\n      text: isAdminLogin ? \"signin_with\" : \"continue_with\",\n      theme: isAdminLogin ? \"filled_blue\" : \"outline\",\n      ux_mode: \"popup\" // Add this line\n      ,\n      cookie_policy: \"single_host_origin\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 9\n  }, this);\n};\n_s(GoogleAuth, \"UHkfWqKqWotCJBriqTc0XaXAMSw=\", false, function () {\n  return [useAuth];\n});\n_c = GoogleAuth;\nexport default GoogleAuth;\nvar _c;\n$RefreshReg$(_c, \"GoogleAuth\");","map":{"version":3,"names":["GoogleOAuthProvider","GoogleLogin","axios","useAuth","jsxDEV","_jsxDEV","GoogleAuth","isAdminLogin","_s","login","handleSuccess","credentialResponse","response","post","process","env","REACT_APP_API_BASE_URL","id_token","credential","provider","is_admin_login","withCredentials","localStorage","setItem","data","token","error","console","clientId","REACT_APP_GOOGLE_CLIENT_ID","redirectUri","window","location","origin","children","onSuccess","onError","log","text","theme","ux_mode","cookie_policy","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/MNNIT/SEM2/programmingLab2/Project/smartcity/smartCity/frontend/src/components/Auth/GoogleLogin.js"],"sourcesContent":["import { GoogleOAuthProvider, GoogleLogin } from '@react-oauth/google';\r\nimport axios from 'axios';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nconst GoogleAuth = ({ isAdminLogin = false }) => {\r\n    const { login } = useAuth();\r\n\r\n    const handleSuccess = async (credentialResponse) => {\r\n        try {\r\n            const response = await axios.post(\r\n                `${process.env.REACT_APP_API_BASE_URL}/api/auth/google/`,\r\n                {\r\n                    id_token: credentialResponse.credential,\r\n                    provider: \"google\",\r\n                    is_admin_login: isAdminLogin\r\n                },\r\n                { withCredentials: true }\r\n            );\r\n            localStorage.setItem('token', response.data.token);\r\n            login(response.data.token, isAdminLogin);\r\n        } catch (error) {\r\n            console.error('Login failed:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <GoogleOAuthProvider \r\n            clientId={process.env.REACT_APP_GOOGLE_CLIENT_ID}\r\n            redirectUri={window.location.origin}\r\n        >\r\n            <GoogleLogin\r\n                onSuccess={handleSuccess}\r\n                onError={() => console.log('Login Failed')}\r\n                text={isAdminLogin ? \"signin_with\" : \"continue_with\"}\r\n                theme={isAdminLogin ? \"filled_blue\" : \"outline\"}\r\n                ux_mode=\"popup\"  // Add this line\r\n                cookie_policy=\"single_host_origin\"\r\n            />\r\n        </GoogleOAuthProvider>\r\n    );\r\n};\r\n\r\nexport default GoogleAuth;"],"mappings":";;AAAA,SAASA,mBAAmB,EAAEC,WAAW,QAAQ,qBAAqB;AACtE,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpD,MAAMC,UAAU,GAAGA,CAAC;EAAEC,YAAY,GAAG;AAAM,CAAC,KAAK;EAAAC,EAAA;EAC7C,MAAM;IAAEC;EAAM,CAAC,GAAGN,OAAO,CAAC,CAAC;EAE3B,MAAMO,aAAa,GAAG,MAAOC,kBAAkB,IAAK;IAChD,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMV,KAAK,CAACW,IAAI,CAC7B,GAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,mBAAmB,EACxD;QACIC,QAAQ,EAAEN,kBAAkB,CAACO,UAAU;QACvCC,QAAQ,EAAE,QAAQ;QAClBC,cAAc,EAAEb;MACpB,CAAC,EACD;QAAEc,eAAe,EAAE;MAAK,CAC5B,CAAC;MACDC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEX,QAAQ,CAACY,IAAI,CAACC,KAAK,CAAC;MAClDhB,KAAK,CAACG,QAAQ,CAACY,IAAI,CAACC,KAAK,EAAElB,YAAY,CAAC;IAC5C,CAAC,CAAC,OAAOmB,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;IACzC;EACJ,CAAC;EAED,oBACIrB,OAAA,CAACL,mBAAmB;IAChB4B,QAAQ,EAAEd,OAAO,CAACC,GAAG,CAACc,0BAA2B;IACjDC,WAAW,EAAEC,MAAM,CAACC,QAAQ,CAACC,MAAO;IAAAC,QAAA,eAEpC7B,OAAA,CAACJ,WAAW;MACRkC,SAAS,EAAEzB,aAAc;MACzB0B,OAAO,EAAEA,CAAA,KAAMT,OAAO,CAACU,GAAG,CAAC,cAAc,CAAE;MAC3CC,IAAI,EAAE/B,YAAY,GAAG,aAAa,GAAG,eAAgB;MACrDgC,KAAK,EAAEhC,YAAY,GAAG,aAAa,GAAG,SAAU;MAChDiC,OAAO,EAAC,OAAO,CAAE;MAAA;MACjBC,aAAa,EAAC;IAAoB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACe,CAAC;AAE9B,CAAC;AAACrC,EAAA,CApCIF,UAAU;EAAA,QACMH,OAAO;AAAA;AAAA2C,EAAA,GADvBxC,UAAU;AAsChB,eAAeA,UAAU;AAAC,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}